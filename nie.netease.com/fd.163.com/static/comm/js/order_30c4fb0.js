// nie.define("Order",function(){return mobileType="android",baseurlIos="http://dora.webcgi.163.com/api/87_313_2016_08_11/verify_authcode",codeurlIos="http://dora.webcgi.163.com/api/87_313_2016_08_11/get_authcode_apnt",baseurl=baseurlAndroid="http://dora.webcgi.163.com/api/87_315_2016_08_11/verify_authcode",codeurl=codeurlAndroid="http://dora.webcgi.163.com/api/87_315_2016_08_11/get_authcode_apnt", /* PopDialog=nie.require("nie.util.PopDialog"), */ t=null,fn={popWindow:function(e){var o=$("#"+e),r=(o.width(),o.height(),o.height()/2),t=o.width()/2;o.css({"margin-top":-r,"margin-left":-t}).fadeIn(),$("#fade").length<1&&$("body").append('<div id="fade"></div>'),$("#fade").css({filter:"alpha(opacity=80)"}).fadeIn()},popClose:function(e){$("#fade ,.dialog ,#"+e).fadeOut(),t&&(clearInterval(t),$(".get-btn").removeClass("disable"),$("#order-layer .get-btn em").html("\u83b7\u53d6\u9a8c\u8bc1\u7801"));var o=$(".form-wrap .mobile"),r=$(".form-wrap .code");o.val(""),r.val(""),$.browser.msie&&9>=parseInt($.browser.version)&&fn.usePlaceholder($(".form-wrap"))},liBao:function(){$(".lb-btn, .libao").bind("click",function(){fn.popWindow("gift-layer")})},orderDialog:function(){$(".or-btn").bind("click",function(){mobileType="android",$("#order-layer .type a").eq(0).addClass("on").siblings().removeClass("on"),fn.popWindow("order-layer")}),$(".anOrder").bind("click",function(){mobileType="android",baseurl=baseurlAndroid,codeurl=codeurlAndroid,fn.popWindow("order-layer")})},checkPhoneNumber:function(e){return/^(13|14|15|17|18)\d{9}$/.test(e)?!0:!1},usePlaceholder:function(e){e.find("input").each(function(e,o){var r=$(o);r.attr("placeholder")&&r.val(r.attr("placeholder")),r.bind("blur",function(){""===r.val()&&r.val(r.attr("placeholder"))}),r.bind("focus",function(){r.attr("placeholder")===r.val()&&r.val("")})})},djs:function(){var e=60;t=setInterval(function(){e--,$(".get-btn span").html("("+e+"s)"),0==e&&(console.log(e),t&&clearInterval(t),$(".get-btn").removeClass("disable"),$("#order-layer .get-btn em").html("\u83b7\u53d6\u9a8c\u8bc1\u7801"))},1e3)},getCode:function(){$("#order-layer .get-btn").bind("click",function(){if($(this).hasClass("disable"))return!1;var e=$(".form-wrap .mobile"),o=$.trim(e.val());return""==o?void PopDialog.Alert("\u8bf7\u8f93\u5165\u624b\u673a\u53f7"):fn.checkPhoneNumber(o)?void $.ajax({url:codeurl,type:"get",data:{mobile:o},dataType:"jsonp",success:function(e){e.status||PopDialog.Alert(e.msg),$("#order-layer .get-btn span").html("(60s)"),$("#order-layer .get-btn").addClass("disable"),$("#order-layer .get-btn em").html("\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801"),fn.djs()}}):void PopDialog.Alert("\u624b\u673a\u53f7\u7801\u683c\u5f0f\u9519\u8bef\uff01")})},orderSend:function(){var e=$(".form-wrap .mobile"),o=$(".form-wrap .code");$(".order-btn").bind("click",function(){var r=$.trim(e.val()),a=$.trim(o.val()),n=mobileType;return""==r?void PopDialog.Alert("\u8bf7\u8f93\u5165\u624b\u673a\u53f7"):fn.checkPhoneNumber(r)?""==a?void PopDialog.Alert("\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801"):/\d{6}$/.test(a)?void $.ajax({url:baseurl,type:"get",data:{mobile:r,os:n,authcode:a},dataType:"jsonp",success:function(r){1==r.status?(PopDialog.Alert("\u9884\u7ea6\u6210\u529f"),e.val(""),o.val(""),$.browser.msie&&9>=parseInt($.browser.version)&&fn.usePlaceholder($(".form-wrap")),fn.popClose("order-layer"),t&&clearInterval(t),$(".get-btn").removeClass("disable"),$("#order-layer .get-btn em").html("\u83b7\u53d6\u9a8c\u8bc1\u7801")):"103"==r.status?PopDialog.Alert(r.msg):"201"==r.status?(PopDialog.Alert(r.msg),e.val(""),o.val(""),$.browser.msie&&9>=parseInt($.browser.version)&&fn.usePlaceholder($(".form-wrap"))):PopDialog.Alert("112"==r.status?r.msg:"113"==r.status?r.msg:"105"==r.status?r.msg:"\u9884\u7ea6\u5df2\u622a\u6b62")}}):void PopDialog.Alert("\u8bf7\u8f93\u5165\u6b63\u786e\u683c\u5f0f\u7684\u9a8c\u8bc1\u7801"):void PopDialog.Alert("\u624b\u673a\u53f7\u7801\u683c\u5f0f\u9519\u8bef\uff01")})}},init=function(){fn.orderDialog(),fn.orderSend(),fn.getCode(),fn.liBao(),$.browser.msie&&9>=parseInt($.browser.version)&&fn.usePlaceholder($(".form-wrap"))},{fn:fn,init:init}}),nie.define(function(){Order.init(),});